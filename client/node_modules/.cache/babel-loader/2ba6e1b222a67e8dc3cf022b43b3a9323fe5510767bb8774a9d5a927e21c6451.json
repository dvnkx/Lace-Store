{"ast":null,"code":"import _objectSpread from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useForm}from\"react-hook-form\";import{Navigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{yupResolver}from\"@hookform/resolvers/yup\";import{fetchAuth,selectIsAuth}from\"../../redux/slices/auth\";import{AuthInput}from\"../../components/forms\";import{CustomLink,SubmitButton}from\"../../components/ui/index\";import{loginSchema}from\"../../schemas\";import\"./styles.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Login=function Login(){var _errors$email,_errors$email2,_errors$password,_errors$password2;var isAuth=useSelector(selectIsAuth);var dispatch=useDispatch();var _useForm=useForm({defaultValues:{email:\"\",password:\"\"},resolver:yupResolver(loginSchema),mode:\"onChange\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchAuth(values));case 2:data=_context.sent;if(data.payload){_context.next=5;break;}return _context.abrupt(\"return\",alert(\"Authenticate failed\"));case 5:if(\"token\"in data.payload){window.localStorage.setItem(\"token\",data.payload.token);}case 6:case\"end\":return _context.stop();}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();if(isAuth){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(AuthInput,_objectSpread(_objectSpread({},register(\"email\")),{},{error:Boolean((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message),errorMessage:(_errors$email2=errors.email)===null||_errors$email2===void 0?void 0:_errors$email2.message,type:\"email\",placeholder:\"EMAIL\"})),/*#__PURE__*/_jsx(AuthInput,_objectSpread(_objectSpread({},register(\"password\")),{},{error:Boolean((_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message),errorMessage:(_errors$password2=errors.password)===null||_errors$password2===void 0?void 0:_errors$password2.message,type:\"password\",placeholder:\"PASSWORD\"})),/*#__PURE__*/_jsx(SubmitButton,{disabled:!isValid,type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(CustomLink,{to:\"/registration\",children:\"Registration \"})]})});};export default Login;","map":{"version":3,"names":["React","useForm","Navigate","useDispatch","useSelector","yupResolver","fetchAuth","selectIsAuth","AuthInput","CustomLink","SubmitButton","loginSchema","jsx","_jsx","jsxs","_jsxs","Login","_errors$email","_errors$email2","_errors$password","_errors$password2","isAuth","dispatch","_useForm","defaultValues","email","password","resolver","mode","register","handleSubmit","_useForm$formState","formState","errors","isValid","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","data","wrap","_callee$","_context","prev","next","sent","payload","abrupt","alert","window","localStorage","setItem","token","stop","_x","apply","arguments","to","className","children","_objectSpread","error","Boolean","message","errorMessage","type","placeholder","disabled"],"sources":["/Users/macair/Documents/Codding/Projects/Sneakers-store/client/src/pages/Authentication/Login.jsx"],"sourcesContent":["import React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { Navigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\n\nimport { fetchAuth, selectIsAuth } from \"../../redux/slices/auth\";\n\nimport { AuthInput } from \"../../components/forms\";\nimport { CustomLink, SubmitButton } from \"../../components/ui/index\";\n\nimport { loginSchema } from \"../../schemas\";\n\nimport \"./styles.css\";\n\nexport const Login = () => {\n  const isAuth = useSelector(selectIsAuth);\n  const dispatch = useDispatch();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isValid },\n  } = useForm({\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n    resolver: yupResolver(loginSchema),\n    mode: \"onChange\",\n  });\n\n  const onSubmit = async (values) => {\n    const data = await dispatch(fetchAuth(values));\n\n    if (!data.payload) {\n      return alert(\"Authenticate failed\");\n    }\n\n    if (\"token\" in data.payload) {\n      window.localStorage.setItem(\"token\", data.payload.token);\n    }\n  };\n\n  if (isAuth) {\n    return <Navigate to={\"/\"} />;\n  }\n\n  return (\n    <div className=\"login-container\">\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <AuthInput\n          {...register(\"email\")}\n          error={Boolean(errors.email?.message)}\n          errorMessage={errors.email?.message}\n          type=\"email\"\n          placeholder={\"EMAIL\"}\n        />\n        <AuthInput\n          {...register(\"password\")}\n          error={Boolean(errors.password?.message)}\n          errorMessage={errors.password?.message}\n          type=\"password\"\n          placeholder={\"PASSWORD\"}\n        />\n        <SubmitButton disabled={!isValid} type={\"submit\"}>\n          Submit\n        </SubmitButton>\n        <CustomLink to={\"/registration\"}>Registration </CustomLink>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}