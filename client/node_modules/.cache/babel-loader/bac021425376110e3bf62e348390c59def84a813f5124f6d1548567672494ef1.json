{"ast":null,"code":"import _objectSpread from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useSelector}from\"react-redux\";import{useForm}from\"react-hook-form\";import\"./styles.css\";import{UserInput}from\"../../forms/index\";import{Buttons}from\"../index\";import axios from\"../../../axios\";import{yupResolver}from\"@hookform/resolvers/yup\";import{editDataSchema}from\"../../../schemas\";import{getUnixTime}from\"date-fns\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserDataBlock=function UserDataBlock(_ref){var _errors$fullName,_errors$fullName2,_errors$email,_errors$email2,_errors$birthday,_errors$birthday2;var setVisible=_ref.setVisible;var _useSelector=useSelector(function(state){return state.auth.data;}),fullName=_useSelector.fullName,email=_useSelector.email,birthday=_useSelector.birthday,_id=_useSelector._id;var userData={fullName:fullName,email:email,birthday:birthday};var _useForm=useForm({defaultValues:{fullName:fullName,email:email,birthday:\"\"},resolver:yupResolver(editDataSchema),mode:\"onChange\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid;var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var fullName,email,birthday;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:values.birthday=getUnixTime(values.birthday);if(!(values.birthday===userData.birthday&&values.fullName===userData.fullName&&values.email===userData.email)){_context.next=3;break;}return _context.abrupt(\"return\",setVisible());case 3:fullName=values.fullName,email=values.email,birthday=values.birthday;_context.next=6;return axios.patch(\"/user/update:\".concat(_id),{fullName:fullName,email:email,birthday:birthday});case 6:case\"end\":return _context.stop();}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"user-data-form\",children:[/*#__PURE__*/_jsx(UserInput,_objectSpread(_objectSpread({},register(\"fullName\")),{},{type:\"text\",section:\"Full Name\",error:Boolean((_errors$fullName=errors.fullName)===null||_errors$fullName===void 0?void 0:_errors$fullName.message),errorMessage:(_errors$fullName2=errors.fullName)===null||_errors$fullName2===void 0?void 0:_errors$fullName2.message})),/*#__PURE__*/_jsx(UserInput,_objectSpread(_objectSpread({error:Boolean((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message),errorMessage:(_errors$email2=errors.email)===null||_errors$email2===void 0?void 0:_errors$email2.message},register(\"email\")),{},{type:\"text\",section:\"Email\"})),/*#__PURE__*/_jsx(UserInput,_objectSpread(_objectSpread({},register(\"birthday\")),{},{type:\"date\",section:\"Birthday\",error:Boolean((_errors$birthday=errors.birthday)===null||_errors$birthday===void 0?void 0:_errors$birthday.message),errorMessage:(_errors$birthday2=errors.birthday)===null||_errors$birthday2===void 0?void 0:_errors$birthday2.message})),/*#__PURE__*/_jsx(Buttons,{disabled:!isValid,setVisible:setVisible})]});};export default UserDataBlock;","map":{"version":3,"names":["React","useSelector","useForm","UserInput","Buttons","axios","yupResolver","editDataSchema","getUnixTime","jsx","_jsx","jsxs","_jsxs","UserDataBlock","_ref","_errors$fullName","_errors$fullName2","_errors$email","_errors$email2","_errors$birthday","_errors$birthday2","setVisible","_useSelector","state","auth","data","fullName","email","birthday","_id","userData","_useForm","defaultValues","resolver","mode","register","handleSubmit","_useForm$formState","formState","errors","isValid","onSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","wrap","_callee$","_context","prev","next","abrupt","patch","concat","stop","_x","apply","arguments","className","children","_objectSpread","type","section","error","Boolean","message","errorMessage","disabled"],"sources":["/Users/macair/Documents/Codding/Projects/Sneakers-store/client/src/components/ui/AccountComponents/UserDataBlock.jsx"],"sourcesContent":["import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport \"./styles.css\";\n\nimport { UserInput } from \"../../forms/index\";\nimport { Buttons } from \"../index\";\n\nimport axios from \"../../../axios\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { editDataSchema } from \"../../../schemas\";\n\nimport { getUnixTime } from \"date-fns\";\n\nconst UserDataBlock = ({ setVisible }) => {\n  const { fullName, email, birthday, _id } = useSelector(\n    (state) => state.auth.data\n  );\n  const userData = {\n    fullName,\n    email,\n    birthday,\n  };\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isValid },\n  } = useForm({\n    defaultValues: {\n      fullName: fullName,\n      email: email,\n      birthday: \"\",\n    },\n    resolver: yupResolver(editDataSchema),\n    mode: \"onChange\",\n  });\n\n  const onSubmit = async (values) => {\n    values.birthday = getUnixTime(values.birthday);\n\n    if (\n      values.birthday === userData.birthday &&\n      values.fullName === userData.fullName &&\n      values.email === userData.email\n    ) {\n      return setVisible();\n    }\n\n    const { fullName, email, birthday } = values;\n\n    await axios.patch(`/user/update:${_id}`, {\n      fullName,\n      email,\n      birthday,\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"user-data-form\">\n      <UserInput\n        {...register(\"fullName\")}\n        type={\"text\"}\n        section={\"Full Name\"}\n        error={Boolean(errors.fullName?.message)}\n        errorMessage={errors.fullName?.message}\n      />\n      <UserInput\n        error={Boolean(errors.email?.message)}\n        errorMessage={errors.email?.message}\n        {...register(\"email\")}\n        type={\"text\"}\n        section={\"Email\"}\n      />\n      <UserInput\n        {...register(\"birthday\")}\n        type={\"date\"}\n        section={\"Birthday\"}\n        error={Boolean(errors.birthday?.message)}\n        errorMessage={errors.birthday?.message}\n      />\n      <Buttons disabled={!isValid} setVisible={setVisible} />\n    </form>\n  );\n};\n\nexport default UserDataBlock;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}