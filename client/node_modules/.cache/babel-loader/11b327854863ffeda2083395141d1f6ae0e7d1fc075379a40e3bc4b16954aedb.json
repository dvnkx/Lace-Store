{"ast":null,"code":"import _objectSpread from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useForm}from\"react-hook-form\";import{Navigate}from\"react-router-dom\";import{yupResolver}from\"@hookform/resolvers/yup\";import{selectIsAuth,fetchRegistr}from\"../../redux/slices/auth\";import{AuthInput}from\"../../components/forms/index\";import{SubmitButton,CustomLink}from\"../../components/ui/index\";import{registrSchema}from\"../../schemas\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Registration=function Registration(){var _errors$avatarUrl,_errors$avatarUrl2,_errors$fullName,_errors$fullName2,_errors$email,_errors$email2,_errors$password,_errors$password2;var isAuth=useSelector(selectIsAuth);var dispatch=useDispatch();var _useForm=useForm({defaultValues:{avatarUrl:\"\",fullName:\"\",email:\"\",password:\"\"},resolver:yupResolver(registrSchema),mode:\"onChange\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchRegistr(values));case 2:data=_context.sent;if(data.payload){_context.next=5;break;}return _context.abrupt(\"return\",alert(\"Authenticate failed\"));case 5:if(\"token\"in data.payload){window.localStorage.setItem(\"token\",data.payload.token);}case 6:case\"end\":return _context.stop();}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();if(isAuth){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"reg-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(AuthInput,_objectSpread(_objectSpread({},register(\"avatarUrl\")),{},{error:Boolean((_errors$avatarUrl=errors.avatarUrl)===null||_errors$avatarUrl===void 0?void 0:_errors$avatarUrl.message),errorMessage:(_errors$avatarUrl2=errors.avatarUrl)===null||_errors$avatarUrl2===void 0?void 0:_errors$avatarUrl2.message,type:\"text\",placeholder:\"URL (optional)\"})),/*#__PURE__*/_jsx(AuthInput,_objectSpread(_objectSpread({},register(\"fullName\")),{},{error:Boolean((_errors$fullName=errors.fullName)===null||_errors$fullName===void 0?void 0:_errors$fullName.message),errorMessage:(_errors$fullName2=errors.fullName)===null||_errors$fullName2===void 0?void 0:_errors$fullName2.message,type:\"text\",placeholder:\"FULL NAME\"})),/*#__PURE__*/_jsx(AuthInput,_objectSpread(_objectSpread({},register(\"email\")),{},{error:Boolean((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message),errorMessage:(_errors$email2=errors.email)===null||_errors$email2===void 0?void 0:_errors$email2.message,type:\"email\",placeholder:\"EMAIL\"})),/*#__PURE__*/_jsx(AuthInput,_objectSpread(_objectSpread({},register(\"password\")),{},{error:Boolean((_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message),errorMessage:(_errors$password2=errors.password)===null||_errors$password2===void 0?void 0:_errors$password2.message,type:\"password\",placeholder:\"PASSWORD\"})),/*#__PURE__*/_jsx(SubmitButton,{disabled:!isValid,type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(CustomLink,{to:\"/login\",children:\"Back \"})]})});};export default Registration;","map":{"version":3,"names":["React","useDispatch","useSelector","useForm","Navigate","yupResolver","selectIsAuth","fetchRegistr","AuthInput","SubmitButton","CustomLink","registrSchema","jsx","_jsx","jsxs","_jsxs","Registration","_errors$avatarUrl","_errors$avatarUrl2","_errors$fullName","_errors$fullName2","_errors$email","_errors$email2","_errors$password","_errors$password2","isAuth","dispatch","_useForm","defaultValues","avatarUrl","fullName","email","password","resolver","mode","register","handleSubmit","_useForm$formState","formState","errors","isValid","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","data","wrap","_callee$","_context","prev","next","sent","payload","abrupt","alert","window","localStorage","setItem","token","stop","_x","apply","arguments","to","className","children","_objectSpread","error","Boolean","message","errorMessage","type","placeholder","disabled"],"sources":["/Users/macair/Documents/Codding/Projects/Sneakers-store/client/src/pages/Authentication/Registration.jsx"],"sourcesContent":["import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport { Navigate } from \"react-router-dom\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\n\nimport { selectIsAuth, fetchRegistr } from \"../../redux/slices/auth\";\n\nimport { AuthInput } from \"../../components/forms/index\";\nimport { SubmitButton, CustomLink } from \"../../components/ui/index\";\n\nimport { registrSchema } from \"../../schemas\";\n\nconst Registration = () => {\n  const isAuth = useSelector(selectIsAuth);\n  const dispatch = useDispatch();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isValid },\n  } = useForm({\n    defaultValues: {\n      avatarUrl: \"\",\n      fullName: \"\",\n      email: \"\",\n      password: \"\",\n    },\n    resolver: yupResolver(registrSchema),\n    mode: \"onChange\",\n  });\n\n  const onSubmit = async (values) => {\n    const data = await dispatch(fetchRegistr(values));\n\n    if (!data.payload) {\n      return alert(\"Authenticate failed\");\n    }\n\n    if (\"token\" in data.payload) {\n      window.localStorage.setItem(\"token\", data.payload.token);\n    }\n  };\n\n  if (isAuth) {\n    return <Navigate to={\"/\"} />;\n  }\n\n  return (\n    <div className=\"reg-container\">\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <AuthInput\n          {...register(\"avatarUrl\")}\n          error={Boolean(errors.avatarUrl?.message)}\n          errorMessage={errors.avatarUrl?.message}\n          type=\"text\"\n          placeholder={\"URL (optional)\"}\n        />\n        <AuthInput\n          {...register(\"fullName\")}\n          error={Boolean(errors.fullName?.message)}\n          errorMessage={errors.fullName?.message}\n          type=\"text\"\n          placeholder={\"FULL NAME\"}\n        />\n        <AuthInput\n          {...register(\"email\")}\n          error={Boolean(errors.email?.message)}\n          errorMessage={errors.email?.message}\n          type=\"email\"\n          placeholder={\"EMAIL\"}\n        />\n        <AuthInput\n          {...register(\"password\")}\n          error={Boolean(errors.password?.message)}\n          errorMessage={errors.password?.message}\n          type=\"password\"\n          placeholder={\"PASSWORD\"}\n        />\n        <SubmitButton disabled={!isValid} type=\"submit\">\n          Submit\n        </SubmitButton>\n        <CustomLink to={\"/login\"}>Back </CustomLink>\n      </form>\n    </div>\n  );\n};\n\nexport default Registration;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}