{"ast":null,"code":"import _slicedToArray from\"/Users/macair/Documents/Codding/Projects/Sneakers-store/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import\"./styles.css\";import axios from\"../../axios\";import{selectIsAuth}from\"../../redux/slices/auth\";import{CardsSum}from\"../../helpers/CardsSum\";import{EmptyContainer,Spinner,BasketContainer}from\"../../components/ui/index\";import{jsx as _jsx}from\"react/jsx-runtime\";var Basket=function Basket(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cards=_useState2[0],setCards=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var isAuth=useSelector(selectIsAuth);var userData=useSelector(function(state){return state.auth.data;});var handleToBuy=function handleToBuy(){var orderData={cost:CardsSum(cards),productsNames:cards.map(function(card){return card.model;}),productsImages:cards.map(function(card){return card.images[0];})};axios.patch(\"/basket:\".concat(userData===null||userData===void 0?void 0:userData._id),orderData).then(function(_){alert(\"Your order now in proccess\");setCards([]);});};var handleToDelete=function handleToDelete(cardId){axios.put(\"/basket:\".concat(userData===null||userData===void 0?void 0:userData._id),{cardId:cardId,type:\"remove\"});return setCards(function(prev){return prev.filter(function(card){return card._id!==cardId;});});};useEffect(function(){if(isAuth){axios.get(\"/basket:\".concat(userData===null||userData===void 0?void 0:userData._id)).then(function(res){setCards(res.data.cards);setIsLoading(false);});}},[isAuth]);return/*#__PURE__*/_jsx(\"div\",{className:\"basket-container\",children:isLoading?/*#__PURE__*/_jsx(Spinner,{marginLeft:\"45%\"}):cards.length===0?/*#__PURE__*/_jsx(EmptyContainer,{}):/*#__PURE__*/_jsx(BasketContainer,{cards:cards,handleToDelete:handleToDelete,handleToBuy:handleToBuy})});};export default Basket;","map":{"version":3,"names":["React","useEffect","useState","useSelector","axios","selectIsAuth","CardsSum","EmptyContainer","Spinner","BasketContainer","jsx","_jsx","Basket","_useState","_useState2","_slicedToArray","cards","setCards","_useState3","_useState4","isLoading","setIsLoading","isAuth","userData","state","auth","data","handleToBuy","orderData","cost","productsNames","map","card","model","productsImages","images","patch","concat","_id","then","_","alert","handleToDelete","cardId","put","type","prev","filter","get","res","className","children","marginLeft","length"],"sources":["/Users/macair/Documents/Codding/Projects/Sneakers-store/client/src/pages/Basket/Basket.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport \"./styles.css\";\n\nimport axios from \"../../axios\";\nimport { selectIsAuth } from \"../../redux/slices/auth\";\nimport { CardsSum } from \"../../helpers/CardsSum\";\n\nimport {\n  EmptyContainer,\n  Spinner,\n  BasketContainer,\n} from \"../../components/ui/index\";\n\nconst Basket = () => {\n  const [cards, setCards] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const isAuth = useSelector(selectIsAuth);\n  const userData = useSelector((state) => state.auth.data);\n\n  const handleToBuy = () => {\n    const orderData = {\n      cost: CardsSum(cards),\n      productsNames: cards.map((card) => card.model),\n      productsImages: cards.map((card) => card.images[0]),\n    };\n\n    axios.patch(`/basket:${userData?._id}`, orderData).then((_) => {\n      alert(`Your order now in proccess`);\n      setCards([]);\n    });\n  };\n\n  const handleToDelete = (cardId) => {\n    axios.put(`/basket:${userData?._id}`, { cardId, type: \"remove\" });\n    return setCards((prev) => prev.filter((card) => card._id !== cardId));\n  };\n\n  useEffect(() => {\n    if (isAuth) {\n      axios.get(`/basket:${userData?._id}`).then((res) => {\n        setCards(res.data.cards);\n        setIsLoading(false);\n      });\n    }\n  }, [isAuth]);\n\n  return (\n    <div className=\"basket-container\">\n      {isLoading ? (\n        <Spinner marginLeft={\"45%\"} />\n      ) : cards.length === 0 ? (\n        <EmptyContainer />\n      ) : (\n        <BasketContainer\n          cards={cards}\n          handleToDelete={handleToDelete}\n          handleToBuy={handleToBuy}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Basket;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}